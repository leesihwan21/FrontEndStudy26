// 비밀번호 확인 필드 추가 (HTML에 추가)
<div class="mb-3">
    <label for="confirmPassword" class="form-label">비밀번호 확인</label>
    <input type="password" class="form-control" id="confirmPassword" required>
    <div class="valid-feedback">
        비밀번호가 일치합니다.
    </div>
    <div class="invalid-feedback">
        비밀번호가 일치하지 않습니다.
    </div>
</div>

// 향상된 검증 함수
function validateField(field) {
    let isFieldValid = true;
    let customMessage = '';

    // 기본 HTML5 검증
    if (!field.checkValidity()) {
        isFieldValid = false;
    }

    // 커스텀 검증 규칙
    if (field.id === 'confirmPassword') {
        const password = document.getElementById('userPassword').value;
        const confirmPassword = field.value;

        if (password !== confirmPassword) {
            isFieldValid = false;
            customMessage = '비밀번호가 일치하지 않습니다.';
        }
    }

    // 이메일 도메인 검증 예시
    if (field.type === 'email' && field.value) {
        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailPattern.test(field.value)) {
            isFieldValid = false;
            customMessage = '올바른 이메일 형식이 아닙니다.';
        }
    }

    // 피드백 메시지 업데이트
    if (customMessage) {
        const invalidFeedback = field.parentNode.querySelector('.invalid-feedback');
        if (invalidFeedback) {
            invalidFeedback.textContent = customMessage;
        }
    }

    // 클래스 적용
    if (isFieldValid) {
        field.classList.remove('is-invalid');
        field.classList.add('is-valid');
    } else {
        field.classList.remove('is-valid');
        field.classList.add('is-invalid');
    }

    return isFieldValid;
}
